<!DOCTYPE html>
<html lang="en">
    <head>
        <title> Session Handling </title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Notes on session handling, cookies and local storage">
        <meta name="author" content="Brandon Timothy P. Fernando">  
        <meta name="keywords" content="HTML, CSS, JavaScript, Session Handling, Cookies, Local Storage" >
        <link rel="stylesheet" href="/style.css">
        <script src="script.js" defer></script>

        <style>
                ul {
                    padding-left: 20px;
                }

                li {
                    margin-bottom: 8px;
                }   
                th{
                    background-color: #2c3e50;
                    color: #ecf0f1;
                    padding: 15px;
                    text-align:left;
                }
                td {
                    padding: 12px 15px;
                    border-bottom: 1px solid #edf2f7;
                }

                tr:last-child td {
                    border-bottom: none;
                }

                tr:nth-child(even) {
                    background-color: #f8fafc;
                }

                pre::before {
                    content: "JAVASCRIPT";
                    position: absolute; 
                    top: 10px;
                    left: 15px;
                    font-size: 0.65rem;
                    color: #636d83;
                    opacity: 0.7;
                }

                td:hover{
                    background-color: #04207c;
                    color: rgb(252, 252, 252);
                    transition: 0.3s ease;
                    font-size: 1.01rem;
                }
                
                body {
                    font-family: Arial, Helvetica, sans-serif;
                    margin: 40px auto; 
                    max-width: 800px;  
                    line-height: 1.6;  
                    padding: 0 20px;
                    color: #333;
                }
            .infoBox { /* SUBJECT TO CHANGE AND TO BE PUT IN STYLE.CSS */
                background: white;
                background: white;
                padding: 25px;
                border-radius: 12px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.05);
                margin-bottom: 30px;
                border: 1px solid #e1e4e8;
                border-left: 5px solid #c47ccc; 
            }
            h1, h2 {
                border-bottom: 2px solid #eee;
                padding-bottom: 10px;
            }
            pre {
                background-color: #282c34; 
                border-radius: 8px;
                padding: 20px;
                overflow-x: auto; 
                border: 1px solid #181a1f;
                margin: 20px 0;
                text-align: left;
                padding-top: 35px; 
            }

            code {
                font-family: 'Fira Code', 'Courier New', Courier, monospace;
                font-size: 0.95rem;
                color: #abb2bf; 
                white-space: pre;
            }

            pre code {
                display: block;
                line-height: 1.5;
            }
            </style>
        </head>

        <body>

            <section id="intro">

                <h1> Session Handling </h1>
                
                <p>
                    When you visit a website, it often needs to remember who you are and what you do. This allows the program to be more pesonalized and interactive. All of this is done through session handling, allowing websites to store information about users and their interactions.
                </p>
                <p>
                    There are two main ways to handle sessions: cookies and local storage.
                </p>
            
            </section>

            <section class="infoBox" id="cookies">
                <h2> Cookies </h2>
                <p> 
                    You probably encountered the word cookies while browsing. Sadly, they aren't actual biscuits you can snack on. Instead, they are small pieces of data that websites use to store information in your browser. They are sent back and forth between browser and server, allowing websites to remember preferences such as:
                    <ul>
                        <li> Login Status </li>
                        <li> Theme Preferences </li>
                        <li> Page Analytics </li>
                        <li> Session management </li>
                    </ul>
                </p>
                <p> 
                    If you don't want to be monitored by websites, you can disable cookies in you browser settings, or using Incognito mode. However, some websites may malfunction, prevent log-in, language settings, erase preferences, and more.
                </p>
                <p>
                    Other limitations of cookies include its small size (usually around 4KB), as well as being easily accessed by third parties, which can lead to privacy concerns. In addition, it is deleted when browsers are closed, or based on a set lifespan. Nevertheless, cookies are still useful in personalization and session management.
                </p>
                <p>
                    In JavaScript, you can create, access and delete cookies using document.cookie. This property is a string of key-value pairs (ex. name1=value1; etc.). Below is a smaple of creating and accessing a cookie:
                </p>

                <pre> <code> document.cookie = "username=Gregor Mendel"; // Creates a cookie named "username" with value "Gregor Mendel" 
    console.log(document.cookie) //Output

    document.cookie = "username=Charles Darwin"; //Updates the "username" cookie to "Charles Darwin"

    document.cookie = "newUsername=Luois Pasteur; expires=Sat, 14 Feb 2026 12:00:00 UTC"; //Creates a cookie named "newUsername" with value "Louis Pasteur", that expires on February 14, 2026

    let x = document.cookie; //Access all cookies

    setCookie(Key,Value,Days)
    getCookie(Key)
    checkCookie() //Sample Functions</code> </pre>

            </section>

            <section class="infoBox">
                <h2> Local Storage </h2>
                <p> 
                    For the main focus of this lesson, we will discuss local storage- a more modern way to handle sessions that stores data on the client side (meaning your computer or device). It allows more data to be available for the website without sacrificing performance and loading time. Since it does not have to be sent to servers, it's also less vulnerable to security risks. It is usually used for:
                    <ul>
                        <li> Storing user preferences </li>
                        <li> Caching data for offline use </li>
                        <li> Saving game progress </li>
                        <li> Storing form data </li>
                    </ul>
                </p>
                <p> 

                    To create data on localStorage, you can use a setItem method that takes in a key and value (note that value MUST BE A STRING)
                    <br>
                        <pre> <code>localStorage.setItem(key,value); 
localStorage.setItem("atomicModel","ElectronCloudModel"); </code> </pre>
                        
                    To access data, you use getItem method with key as the parameter
                    <br>
                        <pre><code>localStorage.getItem("key");
localStorage.getItem("atomicModel");  </code></pre>

                    To delete or remove data, use the removeItem method with key as parameter
                    <br>
                        <pre><code>localStorage.removeItem("key");
localStorage.removeItem("atomicModel"); </code></pre>

                    To clear all data, use the clearmethod (no parameters needed)
                    <br>
                        <pre><code>localStorage.clear(); </code></pre>

                <p>
                    You can also get the data keys and number of data stored in localStorage using:
                    <ul>
                        <li> localStorage.key(n) </li>
                        <li> localStorage.length </li>
                    </ul>
                </p>

                <p>
                    You may have noticed that localStorage only accepts string values. But, what if you want to store a number, boolean, array or object? Here, you can use JSON methods to convert data into different formats.
                </p>
                    <div id="specTop">
                        <h3> JSON METHODS</h3>
                        <p>
                            JSON (JavaScript Object Notation) is a lightweight data format that allows data to be stored and exchanged between the client and server. Below are the two main JSON methods:
                        </p>
                        <ul>
                            <li> JSON.stringify() - converts JavaScript objects into JSON strings (ex. object to string)</li>
                            <li> JSON.parse() - converts JSON strings back into JavaScript objects (ex. string to object) </li>
                            <li> Example: </li>
                            <pre><code>let dataString=JSON.stringify(myObj); 
localStorage.setItem("myObj", dataString); 
let objData.JSON.parse(dataString); </code></pre>
                        </ul>
                    </div>
                
            </section>

            <section class="infoBox">
                <h2> Cookies vs Local Storage</h2>

                <table>
                    <tr>
                        <th> Feature </th>
                        <th> Cookies </th>
                        <th> Local Storage </th>
                    </tr>
                    <tr>
                        <td>Size limit</td>
                        <td>4KB</td>
                        <td>5MB or more</td>
                    </tr>
                    <tr>
                        <td>Sent to server?</td>
                        <td>Yes</td>
                        <td>No</td>
                    </tr>
                    <tr>
                        <td>Expires automatically?</td>
                        <td> Yes, either by closing browser or by expiration of closing date</td>
                        <td> No, until it is cleared</td>
                    </tr>
                </table>

                <h2>When to use?</h2>
                <ul>
                    <li> <b>COOKIES:</b> server communication, login session, authentication</li>
                    <li> <b>LOCAL STORAGE:</b> theme and saved preferences, cached data, offline apps</li>
                </ul>

                <h2> Key Takeaway </h2>
                <ul>
                    <li> Use cookies for small server communication that is less secure. </li>
                    <li> Use local storage for larger data that is saved on the client side only </li>
                    <li> Use JSON for conversion of objects and arrays to string, or back to its original form with parse</li>
                </ul>

                <h3> Methods to Rememeber </h3>
                    <ul>
                        <li> document.cookie </li>
                        <li> localStorage.setItem() </li>
                        <li> localStorage.getItem() </li>
                        <li> localStorage.removeItem() </li>
                        <li> localStorage.clear() </li>
                        <li> JSON.stringify() </li>
                        <li> JSON.parse() </li>
                    </ul>

            </section>

        </body>

    </html>